https://opengers.github.io/ceph/ceph-get-pgs-per-osd/
https://zhuanlan.zhihu.com/p/670094183
https://www.cnblogs.com/chris-cp/p/6136831.html



[root@rg15-ceph001 ~]# ceph pg 3.fad query
{
    "state": "active+remapped",
    "snap_trimq": "[]",
    "epoch": 985001,
    "up": [
        716,
        84
    ],
    "acting": [
        716,
        84,
        183
    ],
    "actingbackfill": [
        "84",
        "183",
        "716"
    ],
    "info": {
        "pgid": "3.fad",
        "last_update": "965083'38500346",
        "last_complete": "965083'38500346",
        "log_tail": "953923'38497346",
        "last_user_version": 0,
        "last_backfill": "MAX",
        "last_backfill_bitwise": 1,
        "purged_snaps": "[1~111,113~1,115~271,388~19,3a2~4b,3ee~214]",
        "history": {
            "epoch_created": 332,
            "last_epoch_started": 976771,
            "last_epoch_clean": 976771,
            "last_epoch_split": 0,
            "last_epoch_marked_full": 0,
            "same_up_since": 976770,
            "same_interval_since": 976770,
            "same_primary_since": 975161,
            "last_scrub": "137230'11506148",
            "last_scrub_stamp": "2022-05-28 16:46:08.918128",
            "last_deep_scrub": "14653'186975",
            "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
            "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128"
        },
        "stats": {
            "version": "965083'38500346",
            "reported_seq": "24937286",
            "reported_epoch": "985001",
            "state": "active+remapped",
            "last_fresh": "2025-03-18 21:49:39.435137",
            "last_change": "2025-03-17 13:11:39.704007",
            "last_active": "2025-03-18 21:49:39.435137",
            "last_peered": "2025-03-18 21:49:39.435137",
            "last_clean": "2025-03-17 12:17:12.631426",
            "last_became_active": "2025-03-17 13:11:39.704007",
            "last_became_peered": "2025-03-17 13:11:39.704007",
            "last_unstale": "2025-03-18 21:49:39.435137",
            "last_undegraded": "2025-03-18 21:49:39.435137",
            "last_fullsized": "2025-03-18 21:49:39.435137",
            "mapping_epoch": 976352,
            "log_start": "953923'38497346",
            "ondisk_log_start": "953923'38497346",
            "created": 332,
            "last_epoch_clean": 976771,
            "parent": "0.0",
            "parent_split_bits": 0,
            "last_scrub": "137230'11506148",
            "last_scrub_stamp": "2022-05-28 16:46:08.918128",
            "last_deep_scrub": "14653'186975",
            "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
            "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128",
            "log_size": 3000,
            "ondisk_log_size": 3000,
            "stats_invalid": false,
            "dirty_stats_invalid": false,
            "omap_stats_invalid": false,
            "hitset_stats_invalid": false,
            "hitset_bytes_stats_invalid": false,
            "pin_stats_invalid": false,
            "stat_sum": {
                "num_bytes": 1146193920,
                "num_objects": 280,
                "num_object_clones": 15,
                "num_object_copies": 840,
                "num_objects_missing_on_primary": 0,
                "num_objects_missing": 0,
                "num_objects_degraded": 0,
                "num_objects_misplaced": 280,
                "num_objects_unfound": 0,
                "num_objects_dirty": 280,
                "num_whiteouts": 0,
                "num_read": 24186535,
                "num_read_kb": 1995959829,
                "num_write": 38546422,
                "num_write_kb": 1155613793,
                "num_scrub_errors": 0,
                "num_shallow_scrub_errors": 0,
                "num_deep_scrub_errors": 0,
                "num_objects_recovered": 89739,
                "num_bytes_recovered": 371352960594,
                "num_keys_recovered": 0,
                "num_objects_omap": 0,
                "num_objects_hit_set_archive": 0,
                "num_bytes_hit_set_archive": 0,
                "num_flush": 0,
                "num_flush_kb": 0,
                "num_evict": 0,
                "num_evict_kb": 0,
                "num_promote": 0,
                "num_flush_mode_high": 0,
                "num_flush_mode_low": 0,
                "num_evict_mode_some": 0,
                "num_evict_mode_full": 0,
                "num_objects_pinned": 0
            },
            "up": [
                716,
                84
            ],
            "acting": [
                716,
                84,
                183
            ],
            "blocked_by": [],
            "up_primary": 716,
            "acting_primary": 716
        },
        "empty": 0,
        "dne": 0,
        "incomplete": 0,
        "last_epoch_started": 976771,
        "hit_set_history": {
            "current_last_update": "0'0",
            "history": []
        }
    },
    "peer_info": [
        {
            "peer": "84",
            "pgid": "3.fad",
            "last_update": "965083'38500346",
            "last_complete": "965083'38500346",
            "log_tail": "953923'38497346",
            "last_user_version": 0,
            "last_backfill": "MAX",
            "last_backfill_bitwise": 1,
            "purged_snaps": "[1~111,113~1,115~271,388~19,3a2~4b,3ee~214]",
            "history": {
                "epoch_created": 332,
                "last_epoch_started": 976771,
                "last_epoch_clean": 976771,
                "last_epoch_split": 0,
                "last_epoch_marked_full": 0,
                "same_up_since": 976770,
                "same_interval_since": 976770,
                "same_primary_since": 975161,
                "last_scrub": "137230'11506148",
                "last_scrub_stamp": "2022-05-28 16:46:08.918128",
                "last_deep_scrub": "14653'186975",
                "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
                "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128"
            },
            "stats": {
                "version": "965083'38500346",
                "reported_seq": "24937012",
                "reported_epoch": "975160",
                "state": "active+remapped+backfilling",
                "last_fresh": "2025-03-15 14:22:50.004226",
                "last_change": "2025-03-15 14:07:58.778625",
                "last_active": "2025-03-15 14:22:50.004226",
                "last_peered": "2025-03-15 14:22:50.004226",
                "last_clean": "2025-03-14 16:22:20.577752",
                "last_became_active": "2025-03-14 16:52:36.875730",
                "last_became_peered": "2025-03-14 16:52:36.875730",
                "last_unstale": "2025-03-15 14:22:50.004226",
                "last_undegraded": "2025-03-15 14:22:50.004226",
                "last_fullsized": "2025-03-15 14:22:50.004226",
                "mapping_epoch": 976352,
                "log_start": "953923'38497317",
                "ondisk_log_start": "953923'38497317",
                "created": 332,
                "last_epoch_clean": 956296,
                "parent": "0.0",
                "parent_split_bits": 0,
                "last_scrub": "137230'11506148",
                "last_scrub_stamp": "2022-05-28 16:46:08.918128",
                "last_deep_scrub": "14653'186975",
                "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
                "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128",
                "log_size": 3029,
                "ondisk_log_size": 3029,
                "stats_invalid": false,
                "dirty_stats_invalid": false,
                "omap_stats_invalid": false,
                "hitset_stats_invalid": false,
                "hitset_bytes_stats_invalid": false,
                "pin_stats_invalid": false,
                "stat_sum": {
                    "num_bytes": 1146193920,
                    "num_objects": 280,
                    "num_object_clones": 15,
                    "num_object_copies": 840,
                    "num_objects_missing_on_primary": 0,
                    "num_objects_missing": 0,
                    "num_objects_degraded": 0,
                    "num_objects_misplaced": 3,
                    "num_objects_unfound": 0,
                    "num_objects_dirty": 280,
                    "num_whiteouts": 0,
                    "num_read": 24186535,
                    "num_read_kb": 1995959829,
                    "num_write": 38546422,
                    "num_write_kb": 1155613793,
                    "num_scrub_errors": 0,
                    "num_shallow_scrub_errors": 0,
                    "num_deep_scrub_errors": 0,
                    "num_objects_recovered": 90859,
                    "num_bytes_recovered": 375978221138,
                    "num_keys_recovered": 0,
                    "num_objects_omap": 0,
                    "num_objects_hit_set_archive": 0,
                    "num_bytes_hit_set_archive": 0,
                    "num_flush": 0,
                    "num_flush_kb": 0,
                    "num_evict": 0,
                    "num_evict_kb": 0,
                    "num_promote": 0,
                    "num_flush_mode_high": 0,
                    "num_flush_mode_low": 0,
                    "num_evict_mode_some": 0,
                    "num_evict_mode_full": 0,
                    "num_objects_pinned": 0
                },
                "up": [
                    716,
                    84
                ],
                "acting": [
                    716,
                    84,
                    183
                ],
                "blocked_by": [],
                "up_primary": 716,
                "acting_primary": 716
            },
            "empty": 0,
            "dne": 0,
            "incomplete": 0,
            "last_epoch_started": 976771,
            "hit_set_history": {
                "current_last_update": "0'0",
                "history": []
            }
        },
        {
            "peer": "183",
            "pgid": "3.fad",
            "last_update": "965083'38500346",
            "last_complete": "965083'38500346",
            "log_tail": "953923'38497346",
            "last_user_version": 0,
            "last_backfill": "MAX",
            "last_backfill_bitwise": 1,
            "purged_snaps": "[1~111,113~1,115~271,388~19,3a2~4b,3ee~214]",
            "history": {
                "epoch_created": 332,
                "last_epoch_started": 976771,
                "last_epoch_clean": 976771,
                "last_epoch_split": 0,
                "last_epoch_marked_full": 0,
                "same_up_since": 976770,
                "same_interval_since": 976770,
                "same_primary_since": 975161,
                "last_scrub": "137230'11506148",
                "last_scrub_stamp": "2022-05-28 16:46:08.918128",
                "last_deep_scrub": "14653'186975",
                "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
                "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128"
            },
            "stats": {
                "version": "965083'38500346",
                "reported_seq": "24937012",
                "reported_epoch": "975160",
                "state": "active+remapped+backfilling",
                "last_fresh": "2025-03-15 14:22:50.004226",
                "last_change": "2025-03-15 14:07:58.778625",
                "last_active": "2025-03-15 14:22:50.004226",
                "last_peered": "2025-03-15 14:22:50.004226",
                "last_clean": "2025-03-14 16:22:20.577752",
                "last_became_active": "2025-03-14 16:52:36.875730",
                "last_became_peered": "2025-03-14 16:52:36.875730",
                "last_unstale": "2025-03-15 14:22:50.004226",
                "last_undegraded": "2025-03-15 14:22:50.004226",
                "last_fullsized": "2025-03-15 14:22:50.004226",
                "mapping_epoch": 976352,
                "log_start": "953923'38497317",
                "ondisk_log_start": "953923'38497317",
                "created": 332,
                "last_epoch_clean": 956296,
                "parent": "0.0",
                "parent_split_bits": 0,
                "last_scrub": "137230'11506148",
                "last_scrub_stamp": "2022-05-28 16:46:08.918128",
                "last_deep_scrub": "14653'186975",
                "last_deep_scrub_stamp": "2021-06-03 10:59:03.697555",
                "last_clean_scrub_stamp": "2022-05-28 16:46:08.918128",
                "log_size": 3029,
                "ondisk_log_size": 3029,
                "stats_invalid": false,
                "dirty_stats_invalid": false,
                "omap_stats_invalid": false,
                "hitset_stats_invalid": false,
                "hitset_bytes_stats_invalid": false,
                "pin_stats_invalid": false,
                "stat_sum": {
                    "num_bytes": 1146193920,
                    "num_objects": 280,
                    "num_object_clones": 15,
                    "num_object_copies": 840,
                    "num_objects_missing_on_primary": 0,
                    "num_objects_missing": 0,
                    "num_objects_degraded": 0,
                    "num_objects_misplaced": 3,
                    "num_objects_unfound": 0,
                    "num_objects_dirty": 280,
                    "num_whiteouts": 0,
                    "num_read": 24186535,
                    "num_read_kb": 1995959829,
                    "num_write": 38546422,
                    "num_write_kb": 1155613793,
                    "num_scrub_errors": 0,
                    "num_shallow_scrub_errors": 0,
                    "num_deep_scrub_errors": 0,
                    "num_objects_recovered": 90859,
                    "num_bytes_recovered": 375978221138,
                    "num_keys_recovered": 0,
                    "num_objects_omap": 0,
                    "num_objects_hit_set_archive": 0,
                    "num_bytes_hit_set_archive": 0,
                    "num_flush": 0,
                    "num_flush_kb": 0,
                    "num_evict": 0,
                    "num_evict_kb": 0,
                    "num_promote": 0,
                    "num_flush_mode_high": 0,
                    "num_flush_mode_low": 0,
                    "num_evict_mode_some": 0,
                    "num_evict_mode_full": 0,
                    "num_objects_pinned": 0
                },
                "up": [
                    716,
                    84
                ],
                "acting": [
                    716,
                    84,
                    183
                ],
                "blocked_by": [],
                "up_primary": 716,
                "acting_primary": 716
            },
            "empty": 0,
            "dne": 0,
            "incomplete": 0,
            "last_epoch_started": 976771,
            "hit_set_history": {
                "current_last_update": "0'0",
                "history": []
            }
        }
    ],
    "recovery_state": [
        {
            "name": "Started\/Primary\/Active",
            "enter_time": "2025-03-17 13:11:39.685025",
            "might_have_unfound": [],
            "recovery_progress": {
                "backfill_targets": [],
                "waiting_on_backfill": [],
                "last_backfill_started": "MIN",
                "backfill_info": {
                    "begin": "MIN",
                    "end": "MIN",
                    "objects": []
                },
                "peer_backfill_info": [],
                "backfills_in_flight": [],
                "recovering": [],
                "pg_backend": {
                    "pull_from_peer": [],
                    "pushing": []
                }
            },
            "scrub": {
                "scrubber.epoch_start": "0",
                "scrubber.active": 0,
                "scrubber.state": "INACTIVE",
                "scrubber.start": "MIN",
                "scrubber.end": "MIN",
                "scrubber.subset_last_update": "0'0",
                "scrubber.deep": false,
                "scrubber.seed": 0,
                "scrubber.waiting_on": 0,
                "scrubber.waiting_on_whom": []
            }
        },
        {
            "name": "Started",
            "enter_time": "2025-03-17 13:11:38.727729"
        }
    ],
    "agent_state": {}
}
You have mail in /var/spool/mail/root